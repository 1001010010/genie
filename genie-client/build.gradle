dependencies {
    compile project(':genie-common')
    compile 'org.apache.commons:commons-lang3:3.2.1'
    compile 'org.slf4j:slf4j-log4j12:1.7.0'
    testCompile 'junit:junit:4.11'
    testCompile 'org.mockito:mockito-core:1.9.5'
}

clean {
    delete 'src/main/python/nflx_genie_client.egg-info'
    delete 'src/main/python/dist'
}

task buildPythonPackage(type: Exec) {
    dependsOn clean
    workingDir 'src/main/python'
    commandLine 'python', 'setup.py', 'sdist'
}

task uploadToPypi(type: Exec) {
    dependsOn buildPythonPackage
    workingDir 'src/main/python'
    commandLine 'bash', '-c', 'twine upload dist/*'
}
