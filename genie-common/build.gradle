apply plugin: 'java'

dependencies {
    compile 'org.apache.openjpa:openjpa:2.3.0'
}

task buildMetaModel << {
    println "Building metamodel"
}


task enhance << {
    ant.taskdef(
        name      : 'openJPAEnhancer',
        classpath : project.runtimeClasspath.asPath,
        classname : 'org.apache.openjpa.ant.PCEnhancerTask'
    )

    ant.openJPAEnhancer(
        classpath : project.runtimeClasspath.asPath
    )
}

compileJava {
    dependsOn("buildMetaModel")
}

jar {
    dependsOn enhance
}